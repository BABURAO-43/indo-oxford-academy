<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Indo Oxford Academy — Where curiosity meets care</title>
  <meta name="description" content="Indo Oxford Academy — Nursery to Class 10. Enrolments open. Contact principal: 9128116022" />
  <link rel="icon" href="favicon.ico" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand:#0b4f8a; --soft:#f3f7fb; --muted:#6b7280; --card:#ffffff; --accent:#ffb703;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;color:#0b2130;background:var(--soft);-webkit-font-smoothing:antialiased;scroll-behavior:smooth}
    a{text-decoration:none;color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:18px}

    /* Header */
    header{background:linear-gradient(180deg,var(--brand),#0a5599);color:#fff;padding:12px;border-bottom-left-radius:18px;border-bottom-right-radius:18px;position:sticky;top:0;z-index:1000}
    .hwrap{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{height:48px;border-radius:8px;background:#fff;padding:4px;object-fit:contain}
    .brand h1{margin:0;font-size:18px;letter-spacing:0.2px}
    nav { display:flex; gap:12px; align-items:center; }
    nav a{ color:#fff; margin-left:12px; font-weight:600; cursor:pointer }
    .menu-btn{display:none}

    /* Hero */
    .hero{background:var(--card);padding:18px;border-radius:14px;margin-top:12px;box-shadow:0 10px 30px rgba(11,23,40,0.06);display:flex;gap:14px;align-items:center}
    .hero-left{flex:1}
    .hero h2{margin:0 0 8px;color:#083449;font-size:22px}
    .hero p{margin:0;color:var(--muted)}
    .hero-cta{margin-top:12px}
    .btn{display:inline-block;padding:9px 14px;border-radius:10px;border:0;background:var(--brand);color:#fff;font-weight:600;cursor:pointer}
    .btn-ghost{background:transparent;border:2px solid var(--brand);color:#fff;margin-left:8px}
    .hero-thumb{width:220px;height:140px;border-radius:10px;overflow:hidden;background:#eef6fb;flex-shrink:0;display:flex;align-items:center;justify-content:center}
    .hero-thumb img{width:100%;height:100%;object-fit:cover}

    /* Grid */
    .grid{display:grid;grid-template-columns:1fr;gap:16px;margin-top:16px}
    @media(min-width:880px){ .grid{grid-template-columns: 2fr 1fr} }
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(10,20,30,0.04)}
    .card h3{margin:0 0 8px;color:var(--brand)}
    .notice-item{padding:10px 0;border-bottom:1px solid #eef4f8}
    .muted{color:var(--muted)}

    /* Video card */
    .video-card .video-wrap{border-radius:10px;overflow:hidden}
    .video-frame{width:100%;height:220px;border:0;display:block}
    .video-meta{padding:12px}

    /* Footer */
    footer{margin-top:20px;color:var(--muted);font-size:14px;padding:30px 0;text-align:center}

    /* User widget */
    #user-widget{position:fixed;right:16px;top:14px;z-index:600}
    .small{padding:6px 10px;border-radius:8px;font-size:14px}

    /* responsive */
    @media(max-width:520px){
      nav{display:none}
      .menu-btn{display:block;background:transparent;border:2px solid rgba(255,255,255,0.15);color:#fff;padding:8px;border-radius:8px}
      .hero{flex-direction:column;align-items:flex-start}
      .hero-thumb{width:100%;height:200px}
      .video-frame{height:200px}
      header{padding:12px 10px}
    }

    /* small helpers */
    .links a{display:block;padding:6px 0;color:var(--brand)}
    .muted-2{color:#6b7280;font-size:14px}
    .pill{display:inline-block;padding:6px 10px;background:#f3f7fb;border-radius:999px;color:var(--brand);font-weight:600}
    .open-yt{background:#ef2b2b;color:white;padding:8px 12px;border-radius:8px;border:0;font-weight:700}
    .unmute-btn{background:transparent;border:2px solid var(--brand);padding:8px 10px;border-radius:8px;margin-right:8px}
  </style>
</head>
<body>
  <!-- Top user widget -->
  <div id="user-widget" aria-hidden>
    <div id="guest">
      <a href="./auth-ui.html" class="small" style="background:rgba(255,255,255,0.12);color:#fff;border-radius:8px;padding:8px 10px">Student Portal</a>
    </div>
  </div>

  <header>
    <div class="container hwrap">
      <div class="brand" style="gap:10px">
        <!-- NOTE: ensure file name matches repo: logo-light.png or logo.png in root -->
        <img id="site-logo" src="logo-light.png" alt="Indo Oxford Academy logo" onerror="this.src='logo.png'">
        <div>
          <h1>Indo Oxford Academy</h1>
          <div style="font-size:12px;opacity:0.95">Where curiosity meets care — Estd. 2012</div>
        </div>
      </div>

      <div style="display:flex;align-items:center;gap:10px">
        <nav id="topnav">
          <a data-target="#home">Home</a>
          <a data-target="#notices">Notices</a>
          <a data-target="#timetable">Timetable</a>
          <a data-target="#highlights">Highlights</a>
          <a data-target="#contact">Contact</a>
        </nav>
        <button class="menu-btn" id="menuToggle" aria-label="menu">☰</button>
      </div>
    </div>
  </header>

  <main class="container" id="home">
    <section class="hero card" aria-labelledby="hero-title">
      <div class="hero-left">
        <h2 id="hero-title">Indo Oxford Academy</h2>
        <p>A nurturing school for Nursery to Class 10 — strong academics, values, and creativity. Blended learning with personal attention and experienced teachers.</p>
        <div class="hero-cta">
          <a href="./auth-ui.html" class="btn">Student Portal</a>
          <a href="#contact" class="btn btn-ghost">Enroll Now</a>
        </div>
      </div>
      <div class="hero-thumb" aria-hidden>
        <!-- fallback image = assets/hero.jpg -->
        <img src="assets/hero.jpg" alt="School highlights" onerror="this.style.background='linear-gradient(180deg,#e6f2fb,#cfefff)';this.src='';">
      </div>
    </section>

    <div class="grid">
      <!-- left -->
      <div>
        <div class="card" id="notices">
          <h3>Notices</h3>
          <div id="notice-list" class="muted">Loading notices…</div>
        </div>

        <div class="card" id="timetable" style="margin-top:12px">
          <h3>Sample Class Timetable — Class 6 (Mon–Fri)</h3>
          <table style="width:100%;border-collapse:collapse;margin-top:12px">
            <thead><tr><th style="text-align:left;padding:8px">Time</th><th style="text-align:left;padding:8px">Mon</th><th style="text-align:left;padding:8px">Tue</th><th style="text-align:left;padding:8px">Wed</th><th style="text-align:left;padding:8px">Thu</th><th style="text-align:left;padding:8px">Fri</th></tr></thead>
            <tbody>
              <tr><td style="padding:8px">9:00 - 9:40</td><td style="padding:8px">Math</td><td style="padding:8px">Science</td><td style="padding:8px">English</td><td style="padding:8px">Computer</td><td style="padding:8px">EVS</td></tr>
              <tr><td style="padding:8px">9:45 - 10:25</td><td style="padding:8px">Science</td><td style="padding:8px">Math</td><td style="padding:8px">Social</td><td style="padding:8px">Math</td><td style="padding:8px">Drawing</td></tr>
            </tbody>
          </table>
        </div>

        <div class="card video-card" id="highlights" style="margin-top:12px">
          <h3>School Highlights</h3>
          <div class="video-wrap" style="margin-top:12px">
            <!-- YouTube embed: ensure autoplay muted; id byPiWJ2Obpc -->
            <iframe id="yt-frame" class="video-frame"
              src="https://www.youtube.com/embed/byPiWJ2Obpc?rel=0&modestbranding=1&playsinline=1&mute=1&autoplay=1&enablejsapi=1"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" loading="lazy" title="IOA Video"></iframe>
          </div>

          <div class="video-meta">
            <div style="font-weight:700">Raw material as a fresh child in Indo Oxford Academy</div>
            <div class="muted-2" style="margin-top:8px">Raw material as a fresh child in Indo Oxford Academy — 337 views · 2 years ago.</div>
            <div style="margin-top:12px">
              <button class="unmute-btn" id="unmute">Unmute</button>
              <a class="open-yt" target="_blank" rel="noopener" href="https://youtu.be/byPiWJ2Obpc">Open on YouTube</a>
            </div>
          </div>
        </div>

      </div>

      <!-- right sidebar -->
      <aside>
        <div class="card" style="margin-top:12px">
          <h3>Student & Teacher Portal</h3>
          <p class="muted">Sign in via Portal. After sign-in, your name will appear here and resources will be available.</p>
          <div style="margin-top:10px">
            <strong>Resources</strong>
            <div class="links" style="margin-top:8px">
              <a href="#timetable">Class Timetables</a>
              <a href="#syllabus">Syllabus & Worksheets</a>
              <a href="#notices">Notices</a>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px" id="contact">
          <h3>Contact</h3>
          <p class="muted">Indo Oxford Academy — Address: (Lohardaga), (835302), Jharkhand.<br>Phone: +91-9341192018<br>Principal: +91-9128116022</p>

          <div style="margin-top:12px">
            <strong>Location</strong>
            <!-- Google maps with the coordinates you gave -->
            <div style="margin-top:8px;border-radius:10px;overflow:hidden">
              <iframe title="Indo Oxford Academy map" width="100%" height="200" loading="lazy"
                src="https://www.google.com/maps?q=23.409633,84.670359&hl=hi&z=15&output=embed"></iframe>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <footer>
      © Indo Oxford Academy — All rights reserved.
    </footer>
  </main>

  <!-- Firebase + Notices loader (uses your previous firebaseConfig) -->
  <script type="module">
    // Your Firebase config (same as earlier)
    const firebaseConfig = {
      apiKey: "AIzaSyAIHBis4Sye1PdkbX1ENZa02_6YtJG874Y",
      authDomain: "indooxfordacademy-94000.firebaseapp.com",
      projectId: "indooxfordacademy-94000",
      storageBucket: "indooxfordacademy-94000.firebasestorage.app",
      messagingSenderId: "88109643719",
      appId: "1:88109643719:web:0bf5bb98c213ea06e0cbe2",
      measurementId: "G-C95MDD3MGN"
    };

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getFirestore, collection, query, orderBy, getDocs, limit } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js";
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const noticeList = document.getElementById('notice-list');

    function escapeHTML(s){
      if(!s) return '';
      return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'",'&#39;');
    }
    function shouldHide(doc){
      const txt = (doc.title||'') + ' ' + (doc.body||'');
      const l = txt.toLowerCase();
      if(l.includes('apikey') || l.includes('firebaseconfig') || l.includes('authdomain') || l.includes('messagingsenderid')) return true;
      if((doc.body||'').length > 2000) return true;
      return false;
    }

    async function loadNotices(){
      noticeList.textContent = 'Loading notices…';
      try{
        const q = query(collection(db,'notices'), orderBy('createdAt','desc'), limit(6));
        const snap = await getDocs(q);
        if(snap.empty){ noticeList.innerHTML = '<div class="muted">No notices yet.</div>'; return; }
        const items = [];
        snap.forEach(d=>{
          const data = d.data();
          if(shouldHide(data)) return;
          const title = escapeHTML(data.title || 'Notice');
          const body = escapeHTML((data.body || '').slice(0,400));
          const author = escapeHTML(data.authorName || data.author || '');
          const t = `<div class="notice-item"><strong style="color:var(--brand)">${title}</strong><div style="margin-top:6px;color:#30475a">${body}</div>${author ? `<div style="font-size:12px;color:var(--muted);margin-top:6px">${author}</div>` : ''}</div>`;
          items.push(t);
        });
        if(items.length === 0) noticeList.innerHTML = '<div class="muted">No public notices (hidden for safety).</div>'; else noticeList.innerHTML = items.join('');
      }catch(e){
        console.error(e);
        noticeList.textContent = 'Unable to load notices.';
      }
    }

    loadNotices();

    // Nav smooth + mobile toggle
    document.querySelectorAll('[data-target]').forEach(el=>{
      el.addEventListener('click', (e)=>{
        const sel = el.getAttribute('data-target');
        const target = document.querySelector(sel);
        if(target) target.scrollIntoView({behavior:'smooth',block:'start'});
        // close mobile nav if open
        if(window.innerWidth<=520) document.getElementById('topnav').style.display='none';
      });
    });
    document.getElementById('menuToggle').addEventListener('click', ()=>{
      const nav=document.getElementById('topnav');
      nav.style.display = nav.style.display === 'flex' ? 'none' : 'flex';
      nav.style.flexDirection = 'column';
      nav.style.background='linear-gradient(180deg,#0b4f8a,#0a5599)';
      nav.style.padding='10px';
      nav.style.borderRadius='10px';
    });

    // YouTube unmute: replace src to enable sound (autoplay with sound often blocked, so reload with autoplay=1&mute=0)
    document.getElementById('unmute').addEventListener('click', ()=>{
      const f = document.getElementById('yt-frame');
      const base = 'https://www.youtube.com/embed/byPiWJ2Obpc?rel=0&modestbranding=1&playsinline=1&enablejsapi=1';
      f.src = base + '&autoplay=1&mute=0';
    });

    // Small UX: show/hide broken images gracefully
    document.querySelectorAll('img').forEach(img=>{
      img.addEventListener('error', ()=>{ img.style.opacity=0.85; });
    });

  </script>
</body>
</html>
